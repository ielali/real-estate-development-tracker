# Story 10.19: Projects List Screen Modernization

## Status

**Current Status:** drafted

## User Story

As a **user**,
I want **a modern projects list with visual cards, filtering, search, and grid/list toggle**,
So that **I can quickly find and access my projects with better visual distinction**.

## User Story

As a **user**,
I want **a modern projects list with visual cards, filtering, search, and grid/list toggle**,
So that **I can quickly find and access my projects with better visual distinction**.

## Story Context

**Existing System Integration:**

- Integrates with: Projects data model, existing projects API
- Technology: Tailwind CSS, React, tRPC API
- Follows pattern: Card-based grid layout with filters
- Touch points: Projects list page (`app/projects/page.tsx`)
- Reference: `docs/design/epic-10.3-mockups/projects-list.html`

**Problem Statement:**

The current projects list may be a simple table or basic list, lacking visual distinction between projects and making it hard to quickly scan multiple projects. Users need to find specific projects quickly, see status at a glance, and have different viewing options based on their workflow.

**Target Behavior:**

Users should see a visual grid of project cards with thumbnail images, color-coded status badges, key metrics at a glance, and the ability to search, filter by status, sort by various criteria, and toggle between grid and list views.

## Acceptance Criteria

**Source Mapping:**

- AC 1-2: From mockup design "Header with New Project button" [Source: docs/design/epic-10.3-mockups/projects-list.html, lines 25-41]
- AC 3-6: From mockup design "Search and filter controls" [Source: docs/design/epic-10.3-mockups/projects-list.html, lines 44-87]
- AC 7-10: From mockup design "Summary stats cards" [Source: docs/design/epic-10.3-mockups/projects-list.html, lines 89-146]
- AC 11-17: From mockup design "Project cards with details" [Source: docs/design/epic-10.3-mockups/projects-list.html, lines 148-205]
- AC 18-20: From Epic 10.3 "Color-coded status badges, quick actions" [Source: docs/epics/EPIC-10.3-Screen-Design-Improvements.md, lines 219, 226]
- AC 21: From Epic 10.3 "Grid/list view toggle" [Source: docs/epics/EPIC-10.3-Screen-Design-Improvements.md, lines 205, 222]
- AC 22: From Epic 10.3 "Mobile-optimized card layout" [Source: docs/epics/EPIC-10.3-Screen-Design-Improvements.md, lines 226]
- AC 23: From accessibility requirements "WCAG AA compliance" [Source: docs/epics/EPIC-10.3-Screen-Design-Improvements.md, lines 409]

**Functional Requirements:**

1. Page header with "Projects" title and description
2. New Project button (primary styling) in header
3. Search bar with icon (searches project name and description)
4. Status filter dropdown (All, Active, On Hold, Completed, At Risk)
5. Sort dropdown (Name, Budget, Start Date, Progress)
6. Grid/List view toggle buttons
7. Summary stats row: Total Projects, Active, At Risk, Total Value
8. Stats cards with count/value and colored icons
9. Stats update based on filtered results
10. Empty state guidance when no projects match filters
11. Project cards in grid layout (3 col desktop, 2 tablet, 1 mobile)
12. Card thumbnail with gradient background or image
13. Status badge on card (color-coded: Active=green, On Hold=yellow, Completed=blue, At Risk=red)
14. Favorite button (star icon) on card hover
15. Three metrics: Budget, Progress %, Due Date
16. Progress bar with percentage
17. Project manager avatar and name

**Integration Requirements:**

18. Status badges match project status enum
19. Quick actions menu (three dots) with edit/archive/duplicate options
20. Click card to navigate to project detail
21. Toggle between grid and list views (preserve filters)
22. Mobile responsive: single column, smaller cards, touch-friendly
23. WCAG AA accessibility: keyboard navigation, screen reader support

## Tasks / Subtasks

### Phase 1: Page Header

- [ ] Task 1: Build page header (AC: 1,2)
  - [ ] Header card (bg-white, border-b)
  - [ ] Title: "Projects" (text-2xl, font-bold)
  - [ ] Description: "Manage your real estate development projects"
  - [ ] New Project button (primary styling, plus icon)
  - [ ] Responsive layout (stack on mobile)

### Phase 2: Search and Filter Controls

- [ ] Task 2: Build search bar (AC: 3)
  - [ ] Input with left icon (search icon)
  - [ ] Placeholder: "Search projects..."
  - [ ] Debounce input (300ms)
  - [ ] Search project name and description fields
  - [ ] Clear button when text present
  - [ ] Max-width on desktop (max-w-md)

- [ ] Task 3: Build status filter (AC: 4)
  - [ ] Dropdown select
  - [ ] Options: All Status, Active, On Hold, Completed, At Risk
  - [ ] Filter projects by selected status
  - [ ] Update stats based on filter
  - [ ] Persist filter state

- [ ] Task 4: Build sort dropdown (AC: 5)
  - [ ] Dropdown select
  - [ ] Options: Sort by Name, Budget, Start Date, Progress
  - [ ] Apply sorting to project list
  - [ ] Persist sort preference

- [ ] Task 5: Build view toggle (AC: 6,21)
  - [ ] Two toggle buttons (grid/list)
  - [ ] Grid icon (4 squares)
  - [ ] List icon (3 horizontal lines)
  - [ ] Active state styling (bg-primary, text-white)
  - [ ] Inactive state styling (text-gray-700, hover:bg-gray-50)
  - [ ] Toggle between views
  - [ ] Persist view preference

### Phase 3: Summary Stats

- [ ] Task 6: Create stat card component (AC: 7,8)
  - [ ] Reusable StatCard component
  - [ ] Props: label, value, icon, iconColor, iconBgColor
  - [ ] Card layout: value left, icon right
  - [ ] Icon in colored circle (w-12 h-12)
  - [ ] Responsive sizing

- [ ] Task 7: Implement stats calculations (AC: 7,8,9)
  - [ ] Total Projects count
  - [ ] Active projects count
  - [ ] At Risk projects count
  - [ ] Total Value sum (all project budgets)
  - [ ] Update stats when filters applied
  - [ ] Format currency values ($42.5M)

### Phase 4: Project Card Component

- [ ] Task 8: Build card thumbnail (AC: 12)
  - [ ] Image container (h-40)
  - [ ] Gradient background if no image (gradient-to-br from-{color}-500)
  - [ ] Project image if available
  - [ ] Placeholder SVG text if no image
  - [ ] Aspect ratio maintained
  - [ ] Object-cover for images

- [ ] Task 9: Build status badge (AC: 13,18)
  - [ ] Badge positioned absolute (top-3 right-3)
  - [ ] Color-coded backgrounds:
    - Active: bg-green-500
    - On Hold: bg-yellow-500
    - Completed: bg-blue-500
    - At Risk: bg-red-500
  - [ ] Text: text-white, text-xs, font-semibold
  - [ ] Rounded-full styling
  - [ ] Shadow for depth

- [ ] Task 10: Build favorite button (AC: 14)
  - [ ] Star icon button (top-3 left-3)
  - [ ] Opacity-0, group-hover:opacity-100
  - [ ] Toggle filled/unfilled state
  - [ ] Yellow color for filled (text-yellow-500)
  - [ ] Save favorite state to API
  - [ ] Transition animation

- [ ] Task 11: Build card content (AC: 15,16,17)
  - [ ] Project title (text-lg, font-semibold)
  - [ ] Description (text-sm, text-gray-600)
  - [ ] Three metrics row (Budget, Progress, Due Date)
  - [ ] Vertical dividers between metrics
  - [ ] Progress bar with label and percentage
  - [ ] Project manager section (avatar + name)
  - [ ] Border-t separator before manager
  - [ ] Hover effects (shadow-md on card)

- [ ] Task 12: Build quick actions menu (AC: 19)
  - [ ] Three dots button (bottom right)
  - [ ] Dropdown menu on click
  - [ ] Options: View, Edit, Duplicate, Archive
  - [ ] Menu positioning (above/below based on space)
  - [ ] Close on outside click
  - [ ] Keyboard navigation

### Phase 5: Grid Layout

- [ ] Task 13: Implement grid view (AC: 11,22)
  - [ ] Grid layout: grid-cols-3 lg, grid-cols-2 md, grid-cols-1 sm
  - [ ] Gap-6 between cards
  - [ ] Cards fill available width
  - [ ] Responsive breakpoints
  - [ ] Loading skeleton during fetch

### Phase 6: List View

- [ ] Task 14: Build list view (AC: 21)
  - [ ] Table-like layout with rows
  - [ ] Columns: Thumbnail, Name, Status, Budget, Progress, Due Date, Manager, Actions
  - [ ] Compact row height
  - [ ] Hover state (bg-gray-50)
  - [ ] Sortable column headers
  - [ ] Horizontal scroll on mobile

### Phase 7: Interactions

- [ ] Task 15: Implement card click (AC: 20)
  - [ ] Click card to navigate to project detail
  - [ ] Cursor-pointer on hover
  - [ ] Prevent navigation when clicking actions menu
  - [ ] Keyboard navigation (Tab, Enter)
  - [ ] Focus indicator

- [ ] Task 16: Implement search functionality (AC: 3)
  - [ ] Search through project name
  - [ ] Search through project description
  - [ ] Debounce input (300ms)
  - [ ] Highlight search terms (optional)
  - [ ] Show result count
  - [ ] Clear button functionality

- [ ] Task 17: Implement filtering (AC: 4,9)
  - [ ] Filter by status
  - [ ] Combine with search (status AND search)
  - [ ] Update displayed projects
  - [ ] Update stats to match filtered results
  - [ ] Show "No projects found" if empty
  - [ ] Persist filter in URL params

- [ ] Task 18: Implement sorting (AC: 5)
  - [ ] Sort by name (alphabetical)
  - [ ] Sort by budget (high to low)
  - [ ] Sort by start date (recent first)
  - [ ] Sort by progress (high to low)
  - [ ] Apply after filtering
  - [ ] Persist sort in URL params

### Phase 8: Empty States

- [ ] Task 19: Build empty state components (AC: 10)
  - [ ] No projects at all (new user)
    - "No projects yet" message
    - "Create your first project" button
  - [ ] No search results
    - "No projects match your search" message
    - "Try different keywords" suggestion
    - Clear filters button
  - [ ] No projects in status
    - "No {status} projects" message
  - [ ] Centered content with icon

### Phase 9: Loading States

- [ ] Task 20: Build loading skeletons (AC: 11)
  - [ ] Skeleton for stats cards (shimmer effect)
  - [ ] Skeleton for project cards (shimmer effect)
  - [ ] Show while fetching data
  - [ ] Match grid layout
  - [ ] Accessible (aria-busy, aria-live)

### Phase 10: Mobile Optimization

- [ ] Task 21: Optimize for mobile (AC: 22)
  - [ ] Single column grid on mobile
  - [ ] Smaller card thumbnail (h-32)
  - [ ] Stack search and filters vertically
  - [ ] Hide some filter options on mobile (show in modal)
  - [ ] Touch-friendly button sizes (h-10 minimum)
  - [ ] Swipe gestures for quick actions (optional)
  - [ ] Test on real devices

### Phase 11: Accessibility

- [ ] Task 22: Implement accessibility features (AC: 23)
  - [ ] Semantic HTML (article for cards)
  - [ ] Keyboard navigation (Tab through cards)
  - [ ] Focus indicators visible
  - [ ] Status badges have text alternatives
  - [ ] Search input has label (visible or aria-label)
  - [ ] Filter dropdowns have labels
  - [ ] Card click areas large enough
  - [ ] Color not sole indicator (status has text)
  - [ ] Test with screen reader
  - [ ] Skip link to main content

### Phase 12: Data Integration

- [ ] Task 23: Connect to projects API (AC: 1-23)
  - [ ] Fetch projects using tRPC
  - [ ] Map API data to card format
  - [ ] Handle loading states
  - [ ] Handle error states
  - [ ] Optimistic updates for favorite toggle
  - [ ] Invalidate queries on mutations
  - [ ] Pagination (if many projects)

### Phase 13: Testing & Validation

- [ ] Task 24: Manual testing
  - [ ] Test search with various keywords
  - [ ] Test each status filter
  - [ ] Test each sort option
  - [ ] Test grid/list toggle
  - [ ] Test favorite toggle (persist)
  - [ ] Test quick actions menu
  - [ ] Test card navigation
  - [ ] Test with 0, 1, 10, 100+ projects
  - [ ] Test on mobile devices
  - [ ] Test keyboard navigation

- [ ] Task 25: Automated testing
  - [ ] Unit tests for filter logic
  - [ ] Unit tests for search logic
  - [ ] Unit tests for sort comparators
  - [ ] Component tests for ProjectCard
  - [ ] Integration tests for API calls
  - [ ] Accessibility tests (axe-core)
  - [ ] Visual regression tests

## Dev Notes

### Learnings from Previous Story

**From Story 10.18 (Project Timeline):**

[Source: stories/10.18.story.md - Dev Notes, lines 380-450]

**Key Takeaways:**

- **Component Breakdown:** Break complex UIs into smaller, reusable components
- **State Management:** Use URL params for filters/search to enable sharing links
- **Performance:** Use memoization for expensive operations (sorting, filtering)
- **Loading States:** Show skeletons during data fetch for better UX
- **Responsive Strategy:** Grid columns adjust at breakpoints (3 col → 2 col → 1 col)

**Integration Notes for Current Story:**

- Projects list is inside main app layout (has Sidebar, ContentWrapper)
- Use PageContainer pattern with max-w-7xl (standard content width)
- Maintain consistency with other Epic 10.3 screens
- Consider pagination for users with many projects (50+ projects)
- Favorite functionality needs API endpoint (may need to create)

### Implementation Approach

**File Structure:**

```
apps/web/src/
├── app/projects/
│   └── page.tsx                        # Main projects list page
├── components/projects/
│   ├── ProjectCard.tsx                 # Card component (grid view)
│   ├── ProjectListItem.tsx             # Row component (list view)
│   ├── ProjectsGrid.tsx                # Grid container
│   ├── ProjectsList.tsx                # List container
│   ├── ProjectsFilters.tsx             # Search, filter, sort, view toggle
│   ├── ProjectsStats.tsx               # Stats cards row
│   ├── StatCard.tsx                    # Individual stat card
│   ├── StatusBadge.tsx                 # Status badge component
│   ├── ProjectCardSkeleton.tsx         # Loading skeleton
│   └── ProjectsEmptyState.tsx          # Empty state component
└── lib/
    ├── project-filters.ts              # Filter, search, sort utilities
    └── project-stats.ts                # Stats calculation utilities
```

**Project Card Component:**

```tsx
// components/projects/ProjectCard.tsx
interface ProjectCardProps {
  project: Project
  onFavorite: (id: string) => void
  onClick: (id: string) => void
}

export function ProjectCard({ project, onFavorite, onClick }: ProjectCardProps) {
  const [showMenu, setShowMenu] = useState(false)

  const getGradientClass = () => {
    const gradients = {
      active: "from-green-500 to-green-600",
      "on-hold": "from-yellow-500 to-yellow-600",
      completed: "from-blue-500 to-blue-600",
      "at-risk": "from-red-500 to-red-600",
    }
    return gradients[project.status] || "from-gray-500 to-gray-600"
  }

  return (
    <article
      className="bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow overflow-hidden group cursor-pointer"
      onClick={() => onClick(project.id)}
      role="button"
      tabIndex={0}
      onKeyDown={(e) => e.key === "Enter" && onClick(project.id)}
    >
      {/* Thumbnail */}
      <div className={`h-40 bg-gradient-to-br ${getGradientClass()} relative`}>
        {project.image ? (
          <img src={project.image} alt="" className="w-full h-full object-cover" />
        ) : (
          <div className="w-full h-full flex items-center justify-center">
            <span className="text-white/30 text-2xl font-bold">{project.name}</span>
          </div>
        )}

        {/* Status Badge */}
        <StatusBadge status={project.status} className="absolute top-3 right-3" />

        {/* Favorite Button */}
        <button
          className="absolute top-3 left-3 w-8 h-8 bg-white/90 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"
          onClick={(e) => {
            e.stopPropagation()
            onFavorite(project.id)
          }}
        >
          <StarIcon filled={project.isFavorite} />
        </button>
      </div>

      {/* Content */}
      <div className="p-5">
        <h3 className="text-lg font-semibold text-gray-900 group-hover:text-primary transition-colors">
          {project.name}
        </h3>
        <p className="text-sm text-gray-600 mt-1 line-clamp-2">{project.description}</p>

        {/* Metrics */}
        <div className="mt-4 flex items-center gap-4">
          <div>
            <p className="text-xs text-gray-500">Budget</p>
            <p className="text-sm font-semibold text-gray-900">{formatCurrency(project.budget)}</p>
          </div>
          <div className="h-8 w-px bg-gray-200"></div>
          <div>
            <p className="text-xs text-gray-500">Progress</p>
            <p className="text-sm font-semibold text-gray-900">{project.progress}%</p>
          </div>
          <div className="h-8 w-px bg-gray-200"></div>
          <div>
            <p className="text-xs text-gray-500">Due Date</p>
            <p className="text-sm font-semibold text-gray-900">
              {format(project.dueDate, "MMM yyyy")}
            </p>
          </div>
        </div>

        {/* Progress Bar */}
        <div className="mt-4">
          <div className="flex items-center justify-between mb-1">
            <span className="text-xs text-gray-600">Completion</span>
            <span className="text-xs font-medium text-gray-900">{project.progress}%</span>
          </div>
          <div className="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
            <div
              className="h-full bg-green-500 rounded-full transition-all"
              style={{ width: `${project.progress}%` }}
            />
          </div>
        </div>

        {/* Manager */}
        <div className="mt-4 flex items-center justify-between pt-4 border-t border-gray-200">
          <div className="flex items-center gap-2">
            <div className="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-xs font-semibold text-blue-700">
              {getInitials(project.manager.name)}
            </div>
            <span className="text-sm text-gray-700">{project.manager.name}</span>
          </div>

          {/* Quick Actions */}
          <div className="relative">
            <button
              className="p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100"
              onClick={(e) => {
                e.stopPropagation()
                setShowMenu(!showMenu)
              }}
            >
              <ThreeDotsIcon />
            </button>
            {showMenu && <QuickActionsMenu project={project} onClose={() => setShowMenu(false)} />}
          </div>
        </div>
      </div>
    </article>
  )
}
```

**Filter Utilities:**

```typescript
// lib/project-filters.ts
export function filterProjects(
  projects: Project[],
  filters: {
    search?: string
    status?: ProjectStatus | "all"
    sortBy?: "name" | "budget" | "startDate" | "progress"
  }
): Project[] {
  let filtered = [...projects]

  // Search
  if (filters.search) {
    const searchLower = filters.search.toLowerCase()
    filtered = filtered.filter(
      (p) =>
        p.name.toLowerCase().includes(searchLower) ||
        p.description.toLowerCase().includes(searchLower)
    )
  }

  // Status filter
  if (filters.status && filters.status !== "all") {
    filtered = filtered.filter((p) => p.status === filters.status)
  }

  // Sort
  if (filters.sortBy) {
    filtered.sort((a, b) => {
      switch (filters.sortBy) {
        case "name":
          return a.name.localeCompare(b.name)
        case "budget":
          return b.budget - a.budget
        case "startDate":
          return new Date(b.startDate).getTime() - new Date(a.startDate).getTime()
        case "progress":
          return b.progress - a.progress
        default:
          return 0
      }
    })
  }

  return filtered
}

export function useProjectFilters(projects: Project[]) {
  const [search, setSearch] = useState("")
  const [status, setStatus] = useState<ProjectStatus | "all">("all")
  const [sortBy, setSortBy] = useState<"name" | "budget" | "startDate" | "progress">("name")

  const filtered = useMemo(
    () => filterProjects(projects, { search, status, sortBy }),
    [projects, search, status, sortBy]
  )

  return {
    filtered,
    search,
    setSearch,
    status,
    setStatus,
    sortBy,
    setSortBy,
  }
}
```

**Stats Calculations:**

```typescript
// lib/project-stats.ts
export function calculateProjectStats(projects: Project[]) {
  const total = projects.length
  const active = projects.filter((p) => p.status === "active").length
  const atRisk = projects.filter((p) => p.status === "at-risk").length
  const totalValue = projects.reduce((sum, p) => sum + p.budget, 0)

  return {
    total,
    active,
    atRisk,
    totalValue,
  }
}

export function formatLargeNumber(num: number): string {
  if (num >= 1000000) {
    return `$${(num / 1000000).toFixed(1)}M`
  }
  if (num >= 1000) {
    return `$${(num / 1000).toFixed(1)}K`
  }
  return `$${num}`
}
```

**Status Badge Component:**

```tsx
// components/projects/StatusBadge.tsx
const statusStyles = {
  active: "bg-green-500 text-white",
  "on-hold": "bg-yellow-500 text-white",
  completed: "bg-blue-500 text-white",
  "at-risk": "bg-red-500 text-white",
}

const statusLabels = {
  active: "Active",
  "on-hold": "On Hold",
  completed: "Completed",
  "at-risk": "At Risk",
}

export function StatusBadge({ status, className }: { status: ProjectStatus; className?: string }) {
  return (
    <span
      className={`px-3 py-1 text-xs font-semibold rounded-full shadow-lg ${statusStyles[status]} ${className}`}
    >
      {statusLabels[status]}
    </span>
  )
}
```

**Grid/List Toggle:**

```tsx
// components/projects/ViewToggle.tsx
export function ViewToggle({ view, onViewChange }: ViewToggleProps) {
  return (
    <div className="flex items-center border border-gray-300 rounded-lg">
      <button
        className={`px-3 py-2 text-sm rounded-l-lg ${
          view === "grid" ? "bg-primary text-white" : "text-gray-700 hover:bg-gray-50"
        }`}
        onClick={() => onViewChange("grid")}
        aria-label="Grid view"
      >
        <GridIcon />
      </button>
      <button
        className={`px-3 py-2 text-sm rounded-r-lg ${
          view === "list" ? "bg-primary text-white" : "text-gray-700 hover:bg-gray-50"
        }`}
        onClick={() => onViewChange("list")}
        aria-label="List view"
      >
        <ListIcon />
      </button>
    </div>
  )
}
```

### Design System Specifications

**Card Thumbnail Gradients:**

```typescript
const thumbnailGradients = {
  active: "from-green-500 to-green-600",
  "on-hold": "from-yellow-500 to-yellow-600",
  completed: "from-blue-500 to-blue-600",
  "at-risk": "from-red-500 to-red-600",
  default: "from-gray-500 to-gray-600",
}
```

**Stat Card Icons:**

```typescript
const statIcons = {
  total: {
    icon: "BuildingIcon",
    bgColor: "bg-blue-100",
    iconColor: "text-blue-600",
  },
  active: {
    icon: "CheckCircleIcon",
    bgColor: "bg-green-100",
    iconColor: "text-green-600",
  },
  atRisk: {
    icon: "WarningIcon",
    bgColor: "bg-red-100",
    iconColor: "text-red-600",
  },
  totalValue: {
    icon: "DollarIcon",
    bgColor: "bg-purple-100",
    iconColor: "text-purple-600",
  },
}
```

**Responsive Grid:**

```css
/* Grid layout */
grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6

/* Mobile: 1 column (< 768px) */
/* Tablet: 2 columns (768px - 1024px) */
/* Desktop: 3 columns (>= 1024px) */
```

### Mobile Optimization

**Touch Targets:**

```css
/* Buttons */
h-10:   40px (minimum touch target)
h-12:   48px (comfortable)

/* Card click area: entire card */
/* Quick actions button: at least 44px */
```

**Mobile Adjustments:**

- Stack search and filters vertically
- Hide sort dropdown in modal (accessed via filter button)
- Smaller card thumbnails (h-32 instead of h-40)
- Single column grid
- Bottom sheet for quick actions menu

### Accessibility Requirements

**Card Accessibility:**

```tsx
<article
  className="..."
  role="button"
  tabIndex={0}
  onClick={handleClick}
  onKeyDown={(e) => e.key === "Enter" && handleClick()}
  aria-label={`View project: ${project.name}`}
>
  {/* Card content */}
</article>
```

**Status Badge Accessibility:**

```tsx
<span className="..." aria-label={`Project status: ${statusLabels[status]}`}>
  {statusLabels[status]}
</span>
```

**Search Input Accessibility:**

```tsx
<div className="relative">
  <label htmlFor="project-search" className="sr-only">
    Search projects
  </label>
  <input
    id="project-search"
    type="text"
    placeholder="Search projects..."
    aria-describedby="search-help"
  />
  <span id="search-help" className="sr-only">
    Search by project name or description
  </span>
</div>
```

### Testing Strategy

**Filter/Search Tests:**

- Search with exact match
- Search with partial match
- Search with no results
- Filter by each status
- Combine search and filter
- Sort by each option
- Persist filters in URL

**Interaction Tests:**

- Click card navigates to detail
- Favorite toggle updates state
- Quick actions menu opens/closes
- View toggle switches layouts
- Keyboard navigation works
- Focus management correct

**Performance Tests:**

- Render time with 100+ projects
- Filter/search performance with large dataset
- Scroll performance in grid view

### References

**Epic Context:**

[Source: docs/epics/EPIC-10.3-Screen-Design-Improvements.md, lines 194-230 - Story 10.19 description]

- Goal: Redesign project cards with better visual hierarchy
- Add project status badges (color-coded)
- Implement advanced filtering and sorting
- Add search with highlighting
- Add grid/list view toggle
- Add quick actions (favorite, archive, duplicate)
- Estimated effort: 2-3 days
- Priority: High
- Risk: Low (UI changes only, no data model changes)

**Design Mockup:**

[Source: docs/design/epic-10.3-mockups/projects-list.html - Complete mockup implementation]

- Header with New Project button
- Search, filter, sort, and view toggle in one card
- Four summary stats cards
- Project cards with thumbnails, badges, metrics
- Grid layout (3 columns)
- Hover effects (shadow, favorite button)
- Quick actions menu

**Existing Projects API:**

[Source: apps/web/src/server/api/routers/projects.ts]

- getProjects endpoint
- Project data model with all necessary fields
- Filtering and sorting capabilities

### Project Structure Notes

[Source: docs/architecture/unified-project-structure.md]

**File Locations:**

- **Projects Page:** `apps/web/src/app/projects/page.tsx` (MODIFY - complete redesign)
- **Project Components:** `apps/web/src/components/projects/*.tsx` (CREATE - 10+ components)
- **Filter Utils:** `apps/web/src/lib/project-filters.ts` (CREATE)
- **Stats Utils:** `apps/web/src/lib/project-stats.ts` (CREATE)
- **Projects API:** `apps/web/src/server/api/routers/projects.ts` (EXISTS - use existing)

**Component Hierarchy:**

```
ProjectsPage
├── Header (title + New Project button)
├── ProjectsFilters (search, filter, sort, view toggle)
├── ProjectsStats (4 stat cards)
└── ProjectsContainer
    ├── ProjectsGrid (if view === 'grid')
    │   └── ProjectCard (for each project)
    └── ProjectsList (if view === 'list')
        └── ProjectListItem (for each project)
```

## Definition of Done

- [ ] Page header implemented with New Project button
- [ ] Search bar working (searches name and description)
- [ ] Status filter dropdown working
- [ ] Sort dropdown working (4 sort options)
- [ ] Grid/List view toggle working
- [ ] View preference persists in local storage
- [ ] Four summary stats cards displaying correctly
- [ ] Stats update based on filtered results
- [ ] Project cards displaying in grid (3 col desktop)
- [ ] Card thumbnails with gradients or images
- [ ] Status badges color-coded correctly
- [ ] Favorite button appears on hover
- [ ] Favorite toggle persists to API
- [ ] Three metrics displayed (Budget, Progress, Due Date)
- [ ] Progress bar with percentage
- [ ] Project manager avatar and name
- [ ] Quick actions menu working (Edit, Duplicate, Archive)
- [ ] Card click navigates to project detail
- [ ] List view implemented (alternative layout)
- [ ] Mobile responsive (single column, smaller cards)
- [ ] Touch-friendly interactions on mobile
- [ ] Empty state for no projects
- [ ] Empty state for no search results
- [ ] Loading skeletons during data fetch
- [ ] Error states with user feedback
- [ ] Keyboard navigation working
- [ ] Screen reader accessible (aria-labels, semantic HTML)
- [ ] Color contrast WCAG AA compliant
- [ ] Search debouncing working (300ms)
- [ ] Filters persist in URL params
- [ ] Performance acceptable (100+ projects)
- [ ] Unit tests passing (filter, search, sort logic)
- [ ] Integration tests passing (API, interactions)
- [ ] Accessibility tests passing (axe-core)
- [ ] Visual regression tests passing
- [ ] Build succeeds with no errors
- [ ] Code reviewed and approved
- [ ] Story status updated to "Done"

## Risk and Compatibility Check

**Risk Assessment:**

- **Primary Risk:** Performance with large numbers of projects
- **Mitigation:** Implement pagination or virtualization for 50+ projects
- **Rollback:** Feature flag to revert to old projects list if issues

**Compatibility Verification:**

- [ ] Works with existing projects API
- [ ] Favorite functionality API endpoint exists (or needs creation)
- [ ] Quick actions work correctly (edit, duplicate, archive)
- [ ] Performance acceptable with 100+ projects
- [ ] Search and filter work with real data
- [ ] No memory leaks from image loading
- [ ] Works on all major browsers
- [ ] Mobile gestures work correctly

## Validation Checklist

**Scope Validation:**

- [x] Story requires projects list redesign (2-3 days)
- [x] Integration with existing API is straightforward
- [x] Mobile responsiveness is critical
- [x] Search and filter are high-priority features
- [x] Grid/list toggle provides workflow flexibility

**Clarity Check:**

- [x] Story requirements are clear (mockup provides reference)
- [x] Integration points are well-defined (projects API)
- [x] Success criteria are testable (visual, functional, performance)
- [x] Rollback approach exists (feature flag)

---

## Change Log

| Date         | Version | Description            | Author    |
| ------------ | ------- | ---------------------- | --------- |
| Nov 13, 2025 | 1.0     | Initial story creation | Dev Agent |

---

## Dev Agent Record

**Context Reference:**

- Story Context: To be generated before implementation
- Design Mockup: `docs/design/epic-10.3-mockups/projects-list.html`

_Implementation notes to be added during development_

---

## QA Results

_To be populated after QA review_

---

**Story Status:** Drafted
**Estimated Effort:** 2-3 days
**Dependencies:** Existing projects API, Epic 10.3 design system
**Epic:** EPIC-10.3 - Screen Design Improvements - Core Workflows
**Created:** November 13, 2025
**Last Updated:** November 13, 2025

---

## Quick Start Guide

**Fastest implementation approach:**

1. Create filter/search utilities (1 hour)
2. Build stat card component (30 min)
3. Implement stats calculations (1 hour)
4. Build status badge component (30 min)
5. Build project card component (3 hours)
6. Build projects grid layout (1 hour)
7. Build projects filters component (2 hours)
8. Implement search functionality (1 hour)
9. Implement status filter (1 hour)
10. Implement sorting (1 hour)
11. Implement view toggle (1 hour)
12. Build list view layout (2 hours)
13. Implement favorite toggle (1 hour)
14. Implement quick actions menu (2 hours)
15. Add mobile responsive styles (2 hours)
16. Add accessibility features (2 hours)
17. Integration testing and bug fixes (3 hours)

**Total: ~24 hours (3 days)**
