# Story 10.14: Icon System - Material Symbols vs Lucide Decision

## Status

**Current Status:** todo

## User Story

As a **product team**,
I want **to decide on a single icon system and implement filled icon states**,
So that **the interface has consistent iconography and better visual feedback**.

## Story Context

**Existing System Integration:**

- Integrates with: All navigation components (Sidebar, HorizontalNav, BottomTabBar)
- Technology: Currently using lucide-react icons
- Follows pattern: Icon system decision + implementation
- Touch points: All components using icons, package.json
- Reference: `docs/design/NAVIGATION_GAP_ANALYSIS.md` - Icon section

**Design Requirements:**

Target design uses Material Symbols Outlined with filled states for active items:

- Material Symbols: `dashboard`, `apartment`, `payments`, `schedule`, etc.
- Filled variant for active navigation items
- Outline variant for inactive items

Current implementation uses Lucide React:

- Lucide icons: `Home`, `FolderKanban`, `Briefcase`, `Users`, etc.
- No filled variant (always outline)
- Different aesthetic from Material Design

## Acceptance Criteria

**Functional Requirements:**

1. Decision documented: Use Material Symbols OR keep Lucide
2. If Material Symbols: Install and configure library
3. If Lucide: Create filled icon equivalents or accept divergence
4. Active navigation items show filled/bold icon variant
5. Inactive navigation items show outline/regular variant

**Integration Requirements:**

6. All navigation components updated with chosen icon system
7. Icon imports centralized (no scattered icon files)
8. Icon size consistent across all components (w-5 h-5 / 20px)
9. Icon color follows design system tokens

**Quality Requirements:**

10. Icons render correctly on all screen sizes
11. Icons accessible (proper ARIA labels)
12. Icon transitions smooth when toggling active state
13. Bundle size increase acceptable (< 50KB gzipped)

## Tasks / Subtasks

### Phase 1: Research & Decision

- [ ] Task 1: Evaluate icon library options (AC: 1,13)
  - [ ] Research Material Symbols React library options
  - [ ] Evaluate bundle size impact:
    - Lucide: ~60KB gzipped (tree-shakeable)
    - Material Symbols: ~100-200KB (depends on variant)
  - [ ] Test Material Symbols React integration
  - [ ] Compare icon availability (both have 1000+ icons)
  - [ ] Assess migration effort (replace all icon imports)
  - [ ] Consider long-term maintenance

- [ ] Task 2: Document decision and rationale (AC: 1)
  - [ ] Create decision document
  - [ ] List pros/cons of each option
  - [ ] Include bundle size analysis
  - [ ] Document migration plan
  - [ ] Get stakeholder approval
  - [ ] Update story with decision

### Option A: Switch to Material Symbols

#### Phase 2A: Install Material Symbols

- [ ] Task 3A: Install Material Symbols library (AC: 2)
  - [ ] Research best Material Symbols React package
  - [ ] Options:
    - `@mui/icons-material` (large, comprehensive)
    - `react-material-symbols` (lightweight wrapper)
    - Custom SVG imports
  - [ ] Install chosen package
  - [ ] Configure build to tree-shake unused icons
  - [ ] Test icon imports

#### Phase 3A: Create Icon Mapping

- [ ] Task 4A: Map Lucide icons to Material equivalents (AC: 6)
  - [ ] Create icon mapping file:
    ```ts
    Home → Dashboard (or Home)
    FolderKanban → Apartment
    Briefcase → BusinessCenter
    Users → Group
    Building2 → Business
    Grid2x2 → GridView
    Bell → Notifications
    Settings → Settings
    Menu → Menu
    ```
  - [ ] Document any icons without direct equivalents
  - [ ] Test all Material icons render correctly

#### Phase 4A: Update Components

- [ ] Task 5A: Replace icons in Sidebar (AC: 4,5,6)
  - [ ] Update imports to Material Symbols
  - [ ] Implement filled/outline variants:
    ```tsx
    <DashboardIcon className={active ? "filled" : ""} />
    ```
  - [ ] Test active/inactive states
  - [ ] Verify tooltips still work

- [ ] Task 6A: Replace icons in other components (AC: 6)
  - [ ] Update HorizontalNav icons
  - [ ] Update BottomTabBar icons
  - [ ] Update TopHeaderBar icons
  - [ ] Update MobileNavigation icons
  - [ ] Update any other icon usage

#### Phase 5A: Remove Lucide

- [ ] Task 7A: Clean up Lucide dependency
  - [ ] Remove lucide-react from package.json
  - [ ] Remove all Lucide imports
  - [ ] Run build to verify no errors
  - [ ] Check bundle size reduction

### Option B: Keep Lucide Icons

#### Phase 2B: Create Filled Icon Variants

- [ ] Task 3B: Implement filled Lucide icons (AC: 3,4,5)
  - [ ] Research Lucide icon customization
  - [ ] Options:
    - CSS: `fill: currentColor` + stroke-width adjustment
    - Component wrapper: Bold/filled variant
    - Custom SVG duplication
  - [ ] Create filled icon utility:
    ```tsx
    export function FilledIcon({ icon: Icon, filled, ...props }) {
      return (
        <Icon {...props} strokeWidth={filled ? 3 : 2} fill={filled ? "currentColor" : "none"} />
      )
    }
    ```
  - [ ] Test filled vs outline appearance

#### Phase 3B: Update Components with Filled State

- [ ] Task 4B: Add filled state to Sidebar (AC: 4,5)
  - [ ] Wrap icons with FilledIcon component
  - [ ] Pass `filled={active}` prop
  - [ ] Test visual distinction
  - [ ] Adjust if not distinct enough

- [ ] Task 5B: Update other components (AC: 6)
  - [ ] Update HorizontalNav with filled state
  - [ ] Update BottomTabBar with filled state
  - [ ] Verify visual consistency

#### Phase 4B: Document Divergence

- [ ] Task 6B: Document design divergence (AC: 1)
  - [ ] Create doc explaining Lucide choice
  - [ ] Document filled icon implementation
  - [ ] Add screenshots comparing to target
  - [ ] Get stakeholder approval

### Common Tasks (Both Options)

#### Phase 5: Icon System Standardization

- [ ] Task 7: Centralize icon imports (AC: 7)
  - [ ] Create `components/icons/index.ts`
  - [ ] Export all used icons from one place
  - [ ] Update components to import from central file
  - [ ] Benefits: Easy to swap icon libraries, type safety

- [ ] Task 8: Standardize icon sizes (AC: 8)
  - [ ] Audit all icon sizes
  - [ ] Standardize to w-5 h-5 (20px) for navigation
  - [ ] Use w-4 h-4 (16px) for buttons/inline
  - [ ] Use w-6 h-6 (24px) for headers/emphasis
  - [ ] Document size guidelines

- [ ] Task 9: Ensure icon accessibility (AC: 11)
  - [ ] Add `aria-hidden="true"` to decorative icons
  - [ ] Ensure `aria-label` on icon-only buttons
  - [ ] Test with screen reader
  - [ ] Verify focus indicators visible

#### Phase 6: Testing & Polish

- [ ] Task 10: Test icon rendering (AC: 10,12)
  - [ ] Test on desktop (Chrome, Firefox, Safari)
  - [ ] Test on mobile (iOS Safari, Android Chrome)
  - [ ] Test active/inactive transitions
  - [ ] Test with dark mode
  - [ ] Verify no icon distortion

- [ ] Task 11: Verify bundle size (AC: 13)
  - [ ] Build production bundle
  - [ ] Check bundle size increase
  - [ ] Analyze bundle composition
  - [ ] Ensure tree-shaking works
  - [ ] Optimize if needed

#### Phase 7: Documentation

- [ ] Task 12: Document icon system
  - [ ] Document chosen icon library
  - [ ] Create icon usage guidelines
  - [ ] List available icons
  - [ ] Document filled/outline pattern
  - [ ] Add code examples

## Dev Notes

### Decision Criteria

**Switch to Material Symbols IF:**

- ✅ Exact design match is critical
- ✅ Stakeholders approve bundle size increase
- ✅ Team comfortable with migration effort
- ✅ Material Design aesthetic preferred

**Keep Lucide IF:**

- ✅ Bundle size is a concern
- ✅ Current icons are satisfactory
- ✅ Filled state can be approximated
- ✅ Minimize disruption preferred

### Bundle Size Analysis

**Lucide React:**

- Total: ~60KB gzipped
- Tree-shakeable: Yes (only imports used icons)
- Current usage: ~15 icons = ~5KB gzipped

**Material Symbols:**

- `@mui/icons-material`: ~200KB gzipped (all icons)
- Tree-shakeable: Yes (ESM imports)
- Estimated: ~15 icons = ~8KB gzipped

**Impact:** +3KB gzipped (~5% of current JS bundle)

### Implementation Options

**Option A: Material Symbols with MUI**

```bash
npm install @mui/icons-material @mui/material @emotion/react @emotion/styled
```

```tsx
import DashboardIcon from '@mui/icons-material/Dashboard'
import DashboardOutlinedIcon from '@mui/icons-material/DashboardOutlined'

<DashboardIcon /> {/* Filled */}
<DashboardOutlinedIcon /> {/* Outlined */}
```

**Option B: Filled Lucide Wrapper**

```tsx
// components/icons/FilledIcon.tsx
import { LucideIcon } from "lucide-react"

export function FilledIcon({
  icon: Icon,
  filled,
  className,
  ...props
}: {
  icon: LucideIcon
  filled?: boolean
  className?: string
}) {
  return (
    <Icon
      className={className}
      strokeWidth={filled ? 2.5 : 2}
      fill={filled ? "currentColor" : "none"}
      fillOpacity={filled ? 0.2 : 0}
      {...props}
    />
  )
}
```

**Option C: Custom SVG Sprites**

```tsx
// Most control, highest effort
// Not recommended unless specific requirements
```

### Icon Mapping Reference

| Function      | Lucide       | Material Symbols |
| ------------- | ------------ | ---------------- |
| Home          | Home         | Dashboard / Home |
| Projects      | FolderKanban | Apartment        |
| Portfolio     | Briefcase    | BusinessCenter   |
| Contacts      | Users        | Group / Contacts |
| Vendors       | Building2    | Store / Business |
| Categories    | Grid2x2      | Category         |
| Notifications | Bell         | Notifications    |
| Settings      | Settings     | Settings         |
| Help          | HelpCircle   | Help             |
| Menu          | Menu         | Menu             |
| Search        | Search       | Search           |
| Add           | Plus         | Add              |

### Testing Standards

- Visual comparison with target design
- Screenshot tests for regression
- Accessibility audit
- Bundle size monitoring
- Cross-browser testing

## Definition of Done

- [ ] Icon system decision documented and approved
- [ ] Chosen icon library installed (if switching)
- [ ] All navigation components updated with icons
- [ ] Filled/outline variants implemented for active states
- [ ] Icon imports centralized
- [ ] Icon sizes standardized (w-5 h-5)
- [ ] Icons accessible (ARIA labels)
- [ ] Icons render correctly all browsers
- [ ] Icon transitions smooth
- [ ] Bundle size increase acceptable
- [ ] Lucide removed if switching (or kept if staying)
- [ ] Documentation updated
- [ ] Tests pass (unit, visual regression)
- [ ] Build succeeds with no errors
- [ ] TypeScript compilation passes
- [ ] Code reviewed and approved
- [ ] Story status updated to "Done"

## Risk and Compatibility Check

**Minimal Risk Assessment:**

- **Primary Risk:** Icon library switch may introduce regressions
- **Mitigation:** Thorough visual testing, component by component migration
- **Rollback:** Revert to Lucide icons (keep package as fallback temporarily)

**Compatibility Verification:**

- [ ] All icons render on all browsers
- [ ] Icons accessible with screen readers
- [ ] No layout shifts from icon size changes
- [ ] Dark mode icons correct
- [ ] Mobile icons display correctly
- [ ] Bundle size within acceptable limits

## Validation Checklist

**Scope Validation:**

- [x] Story requires decision + implementation (1-2 days)
- [x] Integration approach depends on decision
- [x] Follows existing patterns (icon usage in components)
- [x] No backend changes required

**Clarity Check:**

- [x] Story requirements are clear (filled/outline variants)
- [x] Integration points are well-defined (all navigation)
- [x] Success criteria are testable (visual tests, bundle size)
- [x] Rollback approach exists (revert to Lucide)

---

## Change Log

| Date         | Version | Description            | Author    |
| ------------ | ------- | ---------------------- | --------- |
| Nov 12, 2025 | 1.0     | Initial story creation | Dev Agent |

---

## Dev Agent Record

_To be populated during implementation_

**Decision:** _To be made during Phase 1_

---

## QA Results

_To be populated after QA review_

---

**Story Status:** Approved (Pending decision)
**Estimated Effort:** 1-2 days (depends on decision)
**Dependencies:** All navigation components (Stories 10.3-10.11)
**Epic:** EPIC-10.2 - Design Alignment with Target Specification
**Created:** November 12, 2025
**Last Updated:** November 12, 2025

---

## Recommendation

**Suggested Approach:** **Keep Lucide + Implement Filled Wrapper (Option B)**

**Rationale:**

1. **Bundle size:** Minimal impact (~5KB for current icons)
2. **Migration effort:** Low (wrapper component, no full rewrite)
3. **Visual result:** Acceptable approximation of filled state
4. **Future flexibility:** Easy to switch later if needed
5. **Team familiarity:** Already using Lucide

**Trade-off:** Icons won't exactly match Material Symbols aesthetic, but filled state achieves the goal of better visual feedback for active items.
